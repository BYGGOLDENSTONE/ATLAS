Heavy Attack Wall Impact System - Technical Documentation
=========================================================

SYSTEM OVERVIEW:
----------------
The heavy attack wall impact system has been refactored from a predictive pre-check 
approach to a reactive collision-based detection system that tracks the enemy during 
knockback and responds to actual impacts.

CORE MECHANICS:
---------------

1. Heavy Attack Properties:
   - Damage: Base attack damage (configurable in AttackDataAsset)
   - Knockback: 500 units
   - Ragdoll: Enabled (bCausesRagdoll = true)
   - Input: E key (PlayerCharacter)

2. Collision Detection:
   - Threshold: >150 knockback force (lowered from 300)
   - Detection Sphere: 100 unit radius
   - Tracking Duration: 2 seconds max
   - Collision Channels: WorldStatic, WorldDynamic

3. Surface Classification:
   - Wall: Surface normal Z < 0.3 (mostly vertical)
   - Floor: Surface normal Z > 0.7 (mostly horizontal)  
   - Slope: Between 0.3-0.7 (currently treated as neither)

4. Impact Outcomes:

   WALL IMPACT:
   - Stagger Duration: 2 seconds
   - Poise Damage: 100 (full break)
   - Bounce Effect: 20% of impact force
   - Animation: Wall hit response (TODO)
   - VFX: Wall break effect at impact (TODO)
   - Damage: NONE (removed - stagger only)

   FLOOR IMPACT:
   - Ragdoll Duration: 1 second
   - Poise Damage: 50 (moderate)
   - Recovery: Get-up animation after 1 second (TODO)
   - Animation: Floor fall response (TODO)
   - VFX: Dust/impact at floor hit (TODO)

IMPLEMENTATION DETAILS:
-----------------------

WallImpactComponent:
- StartKnockbackTracking(): Initiates collision monitoring
- OnTargetHit(): Processes collision events
- IsWallHit()/IsFloorHit(): Classifies surface type
- ApplyWallImpactEffects(): Handles wall-specific outcomes
- ApplyFloorImpactEffects(): Handles floor-specific outcomes

DamageCalculator:
- ApplyKnockback(): Launches character with full force
- Creates/finds WallImpactComponent
- Starts tracking after launch (not before)

GAMEPLAY BEHAVIOR:
------------------
- Works at ANY height (ground, airborne, falling)
- No cooldown between impacts (intentional)
- Always triggers if wall exists within detection
- Consistent and predictable for combo potential
- No immunity period after impact

DEBUG FEATURES:
---------------
- Yellow sphere: Shows collision detection radius
- Red sphere: Wall impact location
- Green sphere: Floor impact location
- Cyan arrow: Surface normal direction
- Text overlay: Impact type (WALL/FLOOR)
- Console logs: Force values and impact details

CONFIGURATION:
--------------
Editable in WallImpactComponent defaults:
- CollisionSphereRadius: 100.0f
- MinImpactForce: 150.0f
- WallImpactStaggerDuration: 2.0f
- FloorRagdollDuration: 1.0f
- WallSurfaceAngleThreshold: 0.3f
- FloorSurfaceAngleThreshold: 0.7f

EVENTS:
-------
- OnWallImpact: Broadcasts (Target, HitResult, Force)
- OnFloorImpact: Broadcasts (Target, HitResult)

FUTURE ENHANCEMENTS:
--------------------
- Animation integration for both impact types
- Particle effects at impact points
- Sound effects differentiation
- Possible slope handling
- Wall destructibility system
- Environmental damage zones